{% extends 'theblog/base.html' %}


{% block title %}
    {{post.title_tag}}
{% endblock title %}
    

{% block content %}
    <!-- UserID :   {{user.id}}
    AuthorID :   {{post.author.id}} -->
    <h1>{{post.title}}</h1>
    <small>By: {{ post.author.first_name }}  {{ post.author.last_name }}
        
        {% if user.is_authenticated  %}
            
            {% if user.id == post.author.id %}
                <a href="{% url 'update-post' post.pk%}">Edit</a> 
                |
                <a href="{% url 'delete-post' post.pk %}">Delete</a>        
            {% endif %}
            
        {% endif %}
        <p>Added date: {{post.post_date}}</p>
    </small><br>
    <hr>
    
    {% if post.header_image %}
        <img src="{{post.header_image.url}}" alt="" style="max-height: 400px; max-width: 400px;">    
    {% endif %}
    <br>
    {{post.body|safe}}
    
    <hr>
    <br>
    <form action="{% url 'like-post' post.pk %}" method="POST">
        {% csrf_token %}

        {% if user.is_authenticated  %}
            {% if liked %}
                <button class="btn btn-danger btn-sm" name="post_id" type="submit" value="{{post.id}}">UNLIKE</button>
            {% else %}
                <button class="btn btn-primary btn-sm" name="post_id" type="submit" value="{{post.id}}">LIKE</button>
            {% endif %}
        {% else %}
            <small>You must <a href="{% url 'login' %}">login</a> to like post</small>
        {% endif %}
        
        

        {{total_likes}} Likes

        
        <p>
            <br>
            
        </p>
        
        <div class="card mb-3" >
            <div class="row g-0">
              <div class="col-md-2">
                  
                  {% if post.author.profile.profile_pic %}
                    <img src="{{post.author.profile.profile_pic.url}}" alt="" class="rounded" style="height: 200px; width: 150px;">      
                  {% endif %}
              </div>
              <div class="col-md-10">
                <div class="card-body">
                  <h5 class="card-title">{{post.author.first_name}}</h5>
                  <p class="small text-muted">
                    <a href="{{post.author.profile.website_url}}">Website</a> |
                    <a href="{{post.author.profile.fb_url}}">Facebook</a> |
                    <a href="{{post.author.profile.twitter_url}}">Twitter</a> |
                    <a href="{{post.author.profile.instagram_url}}">Instagram</a> |
                    <a href="{{post.author.profile.pinteres_url}}">Pinteres</a>
                  </p>
                  <p class="card-text">{{post.author.profile.bio}}</p>
                  <p class="card-text"><small class="text-muted">{{post.post_date}}</small></p>
                </div>
              </div>
            </div>
          </div>    


        <p>
            <br>
            <a href="{% url 'home' %}" class="btn btn-secondary">Back</a>
        </p>
    </form>
    
{% endblock content %}
    

